<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/styler.css">
        <script src="/node_modules/jquery/dist/jquery.js"></script>
    </head>
    <body>
        <script>
            var username = sessionStorage.getItem("username");
            var password = sessionStorage.getItem("password");
            var typer = "login";
            //call backend to make sure this username and password exists. 
            //if (!backend()) 
            $.ajax({
                    url: "/login",
                    type: "POST", 
                    dataType: 'html', 
                    data: { username: username, password: password, type: typer}, 
                    success: function(result)
                    { 
                        if (result == "false")
                        {
                            window.location.href="index.html";
                        }
                    },
                    error: function()
                    {
                        window.location.href="index.html";   
                    }
                });
            
                
                $.ajax({
                        url: "/getBalance",
                        type: "POST", 
                        dataType: 'html', 
                        data: { username: username}, 
                        success: function(result)
                        { 
                            curBalance.value = result;
                        },
                        error: function()
                        {
                            alert("Failed to obtain balance");   
                        }
                    });

            function addBalance()
            {
                var amount = amounter.value;
                $.ajax({
                        url: "/addBalance",
                        type: "POST", 
                        dataType: 'html', 
                        data: { username: username, amount: amount }, 
                        success: function(result)
                        { 

                        },
                        error: function()
                        {
                            alert("Failed to add balance");   
                        }
                    });
            }
            
            function logout()
            {
                //Set session to cleared.
                sessionStorage.clear();
                window.location.href="index.html";
            }
        </script>
        <div align="top" id="banner"><p align="right"><input type="Submit" id="logout" name="logout" value="Logout" onclick=logout()></p></div>
        <div align="center"><p>Welcome! Please review your stock options.</p></div>
        <div align="right"><p><label>Amount to add to your current account balance: </label><input type="text" id="amounter" name="amounter"></p>
            <p><input type="Submit" value="Submit" onclick=addBalance()></p></div>
        <div align="right">Current account balance</div>
        <div align="right"><input type="text" readonly="readonly" id="curBalance"></div>
        

    </body>
</html>
